<!doctype html>
<!--[if lt IE 9]>  <html class="ie lte9"> <![endif]-->
<!--[if IE 9]>     <html class="ie ie9 lte9"> <![endif]-->
<!--[if !IE]><!--> <html class="no-ie"> <!--<![endif]-->
<html>
  <head>
    <meta charset="utf-8">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Spiceworks Developers - Potential SQL Errors</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="../../../images/favicon.gif" rel="icon" type="image/gif" />

    <link href="../../../stylesheets/application.css" rel="stylesheet" type="text/css" />
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-314222-31', 'spiceworks.com');
  ga('send', 'pageview');
</script>

  </head>

  <body data-page-name="documentation_reports_sql-errors_index" class="documentation documentation_reports documentation_reports_sql-errors documentation_reports_sql-errors_index">

    <header class="site-navigation sui-opt-in">
  <nav class="global-nav " data-navbar="global">
    <div class="nav-fluid-container">
      <a class="global-nav_brand" href="../../../">Home</a>
      <img src="//static.spiceworks.com/assets/masthead/print_logo.png" class="global-nav_print-logo">
    </div>
  </nav>
  <nav class="domestic-nav" data-sticky="true" data-navbar="domestic">
    <div class="nav-fluid-container">
<a class="domestic-nav_brand" href="../../../">        <div class="swoosh-logo"></div><span class="domestic-nav_title">Developers</span>
</a>      <ul class="domestic-menus">
        <li class=" domestic-menus_entry"><a href="../../../what-is-spiceworks/">What is Spiceworks?</a></li>
        <li class=" domestic-menus_entry"><a href="../../../getting-started/">Getting Started</a></li>
        <li class=" domestic-menus_entry"><a href="../../">Documentation</a></li>
        <li class=" domestic-menus_entry"><a href="../../../downloads/">Downloads</a></li>
        <li class=" domestic-menus_entry"><a href="../../../support/">Support</a></li>
      </ul>
    </div>
  </nav>
</header>


    <div class="content-wrapper sui-fluid-container">
        <div class="with-sidebar with-breadcrumbs">
    <ul class="breadcrumbs">
      <li>
        <a href="../../">Documentation</a>
      </li>
      <li>
        <a href="../">Reports</a>
      </li>
      <li>
        Potential SQL Errors
      </li>
    </ul>

    <div class='aside-wrapper'><aside><nav class='sidebar'><h4>Custom Reports</h4><ul class='nav' role='tablist'><li class=''><a href="../">Reports Overview</a><nav class='submenu'><ul class='nav'><li class=''><a href="#why-should-i-use-reports">Why Should I Use Reports?</a></li><li class=''><a href="#what-can-i-do-with-reports">What Can I Do With Reports?</a></li></ul></nav></li><li class=''><a href="../report-basics/">Report Basics</a><nav class='submenu'><ul class='nav'><li class=''><a href="#accessing-reports">Accessing Reports</a></li><li class=''><a href="#running-a-report">Running A Report</a></li><li class=''><a href="#creating-a-custom-report">Creating A Custom Report</a></li><li class=''><a href="#making-a-report-public">Making a Report Public</a></li><li class=''><a href="#editing-a-report">Editing A Report</a></li><li class=''><a href="#deleting-a-report">Deleting A Report</a></li></ul></nav></li><li class=''><a href="../sharing-reports/">Find and Share Reports</a><nav class='submenu'><ul class='nav'><li class=''><a href="#finding-a-report">Finding A Report</a></li><li class=''><a href="#sharing-a-report">Sharing A Report</a></li></ul></nav></li><li class=''><a href="../import-and-export-reports/">Import and Export Reports</a><nav class='submenu'><ul class='nav'><li class=''><a href="#exporting-a-report">Exporting A Report</a></li><li class=''><a href="#importing-a-report">Importing A Report</a></li></ul></nav></li><li class=''><a href="../advanced-tips/">Advanced Tips</a><nav class='submenu'><ul class='nav'><li class=''><a href="#use-time-worked-in-reports">Use "Time Worked" In Reports</a></li><li class=''><a href="#some-reporting-tricks-and-examples">Some Reporting Tricks And Examples</a></li><li class=''><a href="#using-sql-reports">Using SQL Reports</a></li><li class=''><a href="#using-specific-relative-dates-and-times">Using Specific & Relative Dates and Times</a></li></ul></nav></li><li class='active'><a href="./">Potential SQL Errors</a><nav class='submenu'><ul class='nav'><li class=''><a href="#spiceworks-6-2">Spiceworks 6.2</a></li><li class=''><a href="#spiceworks-4-0">Spiceworks 4.0</a></li></ul></nav></li></ul></nav></aside></div>

    <main class="with-left-sidebar">
      <section class="documentation-hero-header">
        <img alt="Spiceworks Swoosh" src="../../../images/spiceworks-o.png" />
        <h1>Spiceworks Reports</h1>
        <hr class="divider-shadow">
      </section>
      <section class="doc-content">
        <h3 id="introduction">Introduction</h3>

<p>As Spiceworks evolves over time, so does our Database.  Sometimes, we need to make changes in order to support new features and functionality.  This Page will document changes that may affect your custom SQL reports.  This page will go into some technical detail, so knowledge of SQL is a must.</p>

<h3 id="spiceworks-6.2">Spiceworks 6.2</h3>

<p>There are a few substantial database changes in 6.2 that will affect existing SQL reports, mainly centered around ticketing</p>

<p><strong>remote<em>collectors.site</em>name</strong>
The site<em>name column in the remote</em>collectors table has been renamed to just &#39;&#39;&#39;name&#39;&#39;&#39;</p>

<p><strong>due_date</strong>
The due<em>date column in the tickets table has been renamed due</em>at</p>

<p><strong>tickets.time_spent</strong>
time<em>spent has been removed from the db table in 6.2. Now, to make this call, you&#39;ll need to use a SUM expression. As an example:
 SELECT tickets.time</em>spent FROM tickets
will no longer work. In 6.2, you&#39;ll need to use:
 SELECT COALESCE(SUM(ticket<em>work.time</em>spent), 0) as time<em>spent
 FROM tickets LEFT OUTER JOIN ticket</em>work ON ticket<em>work.ticket</em>id = tickets.id
 GROUP BY tickets.id</p>

<p><strong>tickets.labor</strong>
Along the same lines, &quot;labor&quot; has been removed from the db table in 6.2, so you&#39;ll need to use a SUM expression for this as well. Example:
 SELECT tickets.labor FROM tickets
will no longer work. In 6.2, you&#39;ll need to use:
 SELECT COALESCE(SUM(ticket<em>work.labor), 0) as labor
 FROM tickets LEFT OUTER JOIN ticket</em>work ON ticket<em>work.ticket</em>id = tickets.id
 GROUP BY tickets.id</p>

<h3 id="spiceworks-4.0">Spiceworks 4.0</h3>

<p>The only major change in Spiceworks 4.0 that would affect SQL report writers is around how users are related to tickets and comments.</p>

<p><strong>tickets.submitted<em>by</em>email</strong></p>

<p>The column &#39;submitted<em>by</em>email&#39; has been removed.  In previous versions, this column contained the email address of the external end user who created a ticket.  In Spiceworks 4.0, we have changed how users work slightly.  End users are now stored in the &#39;users&#39; table with a role of &#39;end_user&#39;.  They are not (yet) shown in the user management page.</p>

<p>If your report uses &#39;submitted<em>by</em>email&#39;, then you will need to update the SQL to instead join against the users table.  You can find the user id in the created_by field of tickets.</p>

<p>For example, if before you had:</p>
<pre class="highlight plaintext"><code>SELECT summary, submitted_by_email
FROM tickets
</code></pre>

<p>You would need to modify it to:</p>
<pre class="highlight plaintext"><code>SELECT tickets.summary, users.email
FROM tickets LEFT OUTER JOIN users ON users.id=tickets.created_by
</code></pre>

<p><strong>comments.submitted<em>by</em>email</strong></p>

<p>The comments table was change in exactly the same way as the tickets table.  Join against the users table on created_by in order to get user information.</p>

      </section>
    </main>
  </div>

    </div>

    <footer>
  <div class="sui-fluid-container">
    <a href="http://spiceworks.com" class="spiceworks-brand">
      <img alt="Spiceworks Logo" src="../../../images/spiceworks_reversed.png" />
    </a>
    <div class="mid-section">
      <div class="copy-wrapper">
        <p>An IT application, community, and marketplace all rolled into one. Spiceworks is the network more than 6 million IT professionals use to connect with one another and over 3,000 technology brands.</p>
        <p><a href="http://spiceworks.com">Learn More <span class="arrows">»</span></a></p>
      </div>
      <div class="button-wrapper">
        <a class="btn btn-orange is-outlined" href="../../../support/">Contact Us</a>
      </div>
    </div>
    <div class="bottom-section">
      <span class="copyright">© Copyright 2006-14 Spiceworks, Inc.</span>
      <ul class="footer-links">
        <li><a href="//www.spiceworks.com/about">About</a></li>
        <li><a href="//www.spiceworks.com/app">App</a></li>
        <li><a href="//www.spiceworks.com/downloads">Downloads</a></li>
        <li><a href="//community.spiceworks.com">Community</a></li>
        <li><a href="//www.spiceworks.com/marketing">Advertising</a></li>
      </ul>
    </div>
  </div>
</footer>


    
    <script src="../../../javascripts/application.js" type="text/javascript"></script>
  </body>
</html>
