<!doctype html>
<!--[if lt IE 9]>  <html class="ie lte9"> <![endif]-->
<!--[if IE 9]>     <html class="ie ie9 lte9"> <![endif]-->
<!--[if !IE]><!--> <html class="no-ie"> <!--<![endif]-->
<html>
  <head>
    <meta charset="utf-8">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Spiceworks Developers - Reporting with Plugins</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="../../../images/favicon.gif" rel="icon" type="image/gif" />

    <link href="../../../stylesheets/application.css" rel="stylesheet" type="text/css" />
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-314222-31', 'auto');
  ga('send', 'pageview');
</script>

  </head>

  <body data-page-name="documentation_plugins_reporting_index" class="documentation documentation_plugins documentation_plugins_reporting documentation_plugins_reporting_index">

    <header class="site-navigation sui-opt-in">
  <nav class="global-nav " data-navbar="global">
    <div class="nav-fluid-container">
      <a class="global-nav_brand" href="../../../">Home</a>
      <img src="//static.spiceworks.com/assets/masthead/print_logo.png" class="global-nav_print-logo">
    </div>
  </nav>
  <nav class="domestic-nav" data-sticky="true" data-navbar="domestic">
    <div class="nav-fluid-container">
<a class="domestic-nav_brand" href="../../../">        <div class="swoosh-logo"></div><span class="domestic-nav_title">Developers</span>
</a>      <ul class="domestic-menus">
        <li class=" domestic-menus_entry"><a href="../../../what-is-spiceworks/">What is Spiceworks?</a></li>
        <li class=" domestic-menus_entry"><a href="../../../getting-started/">Getting Started</a></li>
        <li class=" domestic-menus_entry"><a href="../../">Documentation</a></li>
        <li class=" domestic-menus_entry"><a href="../../../downloads/">Downloads</a></li>
        <li class=" domestic-menus_entry"><a href="../../../support/">Support</a></li>
      </ul>
    </div>
  </nav>
</header>


    <div class="content-wrapper sui-fluid-container">
        <div class="with-sidebar with-breadcrumbs">
    <ul class="breadcrumbs">
      <li>
        <a href="../../">Documentation</a>
      </li>
      <li>
        <a href="../">Modify Spiceworks</a>
      </li>
      <li>
        Reporting with Plugins
      </li>
    </ul>

    <div class='aside-wrapper'><aside><nav class='sidebar'><h4>Modify Spiceworks</h4><ul class='nav' role='tablist'><li class=''><a href="../">Creating Plugins</a><nav class='submenu'><ul class='nav'><li class=''><a href="#creating-plugins">Creating Plugins</a></li><li class=''><a href="#what-are-plugins">What Are Plugins?</a></li><li class=''><a href="#getting-started">Getting Started</a></li><li class=''><a href="#using-multiple-files-for-a-plugin">Using Multiple Files For A Plugin</a></li><li class=''><a href="#code-templates">Code Templates</a></li><li class=''><a href="#spiceworks-apis">Spiceworks APIs</a></li><li class=''><a href="#tools-to-make-plugins-easier">Tools To Make Plugins Easier</a></li><li class=''><a href="#cloning-a-plugin">Cloning A Plugin</a></li><li class=''><a href="#firebug">Firebug</a></li><li class=''><a href="#sharing-your-plugins">Sharing Your Plugins</a></li><li class=''><a href="#helpful-plugin-pages">Helpful Plugin Pages</a></li></ul></nav></li><li class=''><a href="../your-first-plugin/">Creating Your First Plugin</a><nav class='submenu'><ul class='nav'><li class=''><a href="#creating-a-new-plugin">Creating A New Plugin</a></li><li class=''><a href="#adding-content">Adding Content</a></li><li class=''><a href="#what-s-happening">What's Happening?</a></li><li class=''><a href="#using-javascript">Using Javascript</a></li></ul></nav></li><li class=''><a href="../themes/">Themes for Spiceworks</a><nav class='submenu'><ul class='nav'><li class=''><a href="#updating-the-look-of-spiceworks-with-plugins">Updating The Look Of Spiceworks With Plugins</a></li><li class=''><a href="#changing-the-background-to-an-image">Changing The Background To An Image</a></li><li class=''><a href="#what-s-going-on-here">What's going on here?</a></li></ul></nav></li><li class=''><a href="../building-widgets/">Building Widgets</a><nav class='submenu'><ul class='nav'><li class=''><a href="#creating-new-dashboard-widgets">Creating New Dashboard Widgets</a></li><li class=''><a href="#what-s-going-on-here">What's going on here?</a></li></ul></nav></li><li class=''><a href="../adding-navigation/">Adding Navigation</a><nav class='submenu'><ul class='nav'><li class=''><a href="#adding-navigational-elements">Adding Navigational Elements</a></li><li class=''><a href="#what-s-going-on-here">What's going on here?</a></li></ul></nav></li><li class='active'><a href="./">Reporting with Plugins</a><nav class='submenu'><ul class='nav'><li class=''><a href="#using-plugins-to-run-reports">Using Plugins To Run Reports</a></li><li class=''><a href="#what-s-going-on-here">What's going on here?</a></li></ul></nav></li><li class=''><a href="../messaging/">Messaging with Plugins</a><nav class='submenu'><ul class='nav'><li class=''><a href="#adding-a-message-to-spiceworks-with-plugins">Adding A Message To Spiceworks With Plugins</a></li><li class=''><a href="#what-s-going-on-here">What's going on here?</a></li></ul></nav></li><li class=''><a href="../responding-to-events/">Responding to Events</a><nav class='submenu'><ul class='nav'><li class=''><a href="#have-plugins-cause-spiceworks-to-respond-to-events-within-the-application">Have Plugins Cause Spiceworks To Respond To Events Within The Application</a></li><li class=''><a href="#what-s-going-on-here">What's going on here?</a></li></ul></nav></li><li class=''><a href="../settings/">Using Plugin Settings</a><nav class='submenu'><ul class='nav'><li class=''><a href="#creating-configurable-plugins">Creating Configurable Plugins</a></li><li class=''><a href="#what-s-going-on-here">What's going on here?</a></li></ul></nav></li><li class=''><a href="../multi-file-plugins/">Multi File Plugins</a><nav class='submenu'><ul class='nav'><li class=''><a href="#using-multiple-files-within-a-plugin">Using Multiple files within a plugin</a></li><li class=''><a href="#adding-an-image">Adding an image</a></li><li class=''><a href="#adding-and-editing-css-file">Adding and editing CSS file</a></li><li class=''><a href="#editing-the-js-file">Editing the JS file</a></li><li class=''><a href="#view-your-masterpiece">View your masterpiece</a></li></ul></nav></li><li class=''><a href="../html-plugins/">Creating HTML Plugins</a><nav class='submenu'><ul class='nav'><li class=''><a href="#create-&amp;-edit-the-plugin">Create & Edit the Plugin</a></li><li class=''><a href="#add-&amp;-edit-the-html-file">Add & Edit the HTML</a></li><li class=''><a href="#edit-the-js-file">Edit the JS file</a></li><li class=''><a href="#view-your-masterpiece">View Your Masterpiece</a></li></ul></nav></li><li class=''><a href="../helpdesk-v2/">Updating Help Desk Plugins</a><nav class='submenu'><ul class='nav'><li class=''><a href="#updating-plugins-for-helpdesk-v2">Updating Plugins for Helpdesk v2</a></li><li class=''><a href="#example-modifying-the-helpdesk-once-it-s-ready">Example: Modifying the Helpdesk once it's ready</a></li><li class=''><a href="#example-modifying-the-helpdesk-in-response-to-events">Example: Modifying the Helpdesk in response to events</a></li><li class=''><a href="#example-modifying-helpdesk-comments">Example: Modifying helpdesk comments</a></li></ul></nav></li><li class=''><a href="../language-packs/">Creating Language Packs</a><nav class='submenu'><ul class='nav'><li class=''><a href="#creating-a-language-pack">Creating A Language Pack</a></li><li class=''><a href="#sharing-a-language-pack">Sharing A Language Pack</a></li><li class=''><a href="#installing-a-language-pack">Installing A Language Pack</a></li><li class=''><a href="#enabling-a-language-pack">Enabling A Language Pack</a></li><li class=''><a href="#editing-a-language-pack">Editing A Language Pack</a></li></ul></nav></li><hr /><li class=''><a href="../examples/">Examples</a></li><li class=''><a href="../reference/">API Reference</a><nav class='submenu'><ul class='nav'><li class=''><a href="../reference/">Plugin API Overview</a></li><li class=''><a href="../reference/data-api/">Data API</a></li></ul></nav></li></ul></nav></aside></div>

    <main class="with-left-sidebar">
      <section class="documentation-hero-header">
        <img alt="Spiceworks Swoosh" src="../../../images/spiceworks-o.png" />
        <h1>Modify Spiceworks</h1>
        <hr class="divider-shadow">
      </section>
      <section class="doc-content">
        <h3 id="using-plugins-to-run-reports">Using Plugins To Run Reports</h3>

<p>This tutorial will show you how to have Spiceworks run a report and display the data using a plugin. In this case, we&#39;ll just be creating a page in the My Tools section of Spiceworks that will always display a certain report.</p>

<ul>
<li>Create a new plugin <a href="../your-first-plugin/">as before</a>.</li>
<li>There is a code snippit for running a report and processing its results, but for now, just copy the following code into your plugin.  This example builds a navigation item that runs a report when clicked.</li>
</ul>
<pre class="highlight javascript"><code>  <span class="nx">SPICEWORKS</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">navigation</span><span class="p">.</span><span class="nx">addItem</span><span class="p">({</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'my_report_page'</span><span class="p">,</span>
    <span class="na">label</span><span class="p">:</span> <span class="s1">'My Report Page'</span><span class="p">,</span>
    <span class="na">update</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">table</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">'table'</span><span class="p">);</span>
      <span class="nx">element</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">table</span><span class="p">);</span>
      <span class="nx">SPICEWORKS</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">runReport</span><span class="p">(</span> <span class="mi">15</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">header_row</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">'tr'</span><span class="p">);</span>
        <span class="nx">table</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">header_row</span><span class="p">);</span>
        <span class="nx">response</span><span class="p">.</span><span class="nx">columns</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">colname</span><span class="p">){</span>
          <span class="kd">var</span> <span class="nx">header_col</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">'th'</span><span class="p">);</span>
          <span class="nx">header_row</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">header_col</span><span class="p">);</span>
          <span class="nx">header_col</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">colname</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="nx">response</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">row</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">'tr'</span><span class="p">);</span>
          <span class="nx">table</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>
          <span class="nx">response</span><span class="p">.</span><span class="nx">columns</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">colname</span><span class="p">){</span>
            <span class="kd">var</span> <span class="nx">col</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">'td'</span><span class="p">);</span>
            <span class="nx">row</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">col</span><span class="p">);</span>
            <span class="nx">col</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">item</span><span class="p">[</span><span class="nx">colname</span><span class="p">]);</span>
          <span class="p">});</span>
        <span class="p">});</span>
     <span class="p">});</span>
   <span class="p">}</span>
<span class="p">});</span>
</code></pre>

<ul>
<li>Now open a new tab pointed at any Spiceworks page and select &quot;My Tools&quot; from the &quot;Inventory&quot; menu in the nav bar.</li>
<li>Click &quot;My Report Page&quot; to view the report that the plugin generated.</li>
</ul>

<h3 id="what&#39;s-going-on-here?">What&#39;s going on here?</h3>

<p>This is the most complex example that we&#39;ve created so far, so let&#39;s go through it one piece at a time.</p>

<p>First, let&#39;s add a new navigation item</p>
<pre class="highlight javascript"><code>  <span class="nx">SPICEWORKS</span><span class="p">.</span><span class="nx">app</span><span class="p">.</span><span class="nx">navigation</span><span class="p">.</span><span class="nx">addItem</span><span class="p">({</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'my_report_page'</span><span class="p">,</span>
    <span class="na">label</span><span class="p">:</span> <span class="s1">'My Report Page'</span><span class="p">,</span>
    <span class="na">update</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
</code></pre>

<p>This is covered in some detail in the previous tutorial, so I won&#39;t go into much detail here.  Just to say that when running a report, it&#39;s important to understand where the report data will GO.  In this case, we&#39;re loading the report data into a full page view.  We could, however, have also loaded this report into a widget.</p>

<p>Next, let&#39;s just create a simple table to hold our data.  This is using a Prototype.js api to create new page elements.  Prototype is used by Spiceworks and is therefore also available for use by plugin writers.  For more information on Prototype, check out there website: <a href="http://www.prototypejs.org/">http://www.prototypejs.org/</a></p>
<pre class="highlight javascript"><code>  <span class="kd">var</span> <span class="nx">table</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">'table'</span><span class="p">);</span>
  <span class="nx">element</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">table</span><span class="p">);</span>
</code></pre>

<p>After creating the new table, we inserted it into the element passed to the update function.</p>

<p>Next, we need to actually tell Spiceworks to run a report for us.  Currently, you need to pass the id of the report to be run, but in future versions (or even the next beta) you should be able to use the report name directly instead of the id.  The <tt>runReport</tt> method takes two parameters, the id of the report to run and a function that will process the results.</p>
<pre class="highlight javascript"><code>  <span class="nx">SPICEWORKS</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">runReport</span><span class="p">(</span> <span class="mi">15</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
</code></pre>

<p>The response object contains a couple of properties:</p>

<ul>
<li>columns - an array of the column names</li>
<li>items - an array of objects.  Each object will contain a value for each column.</li>
</ul>

<p>Next, we&#39;ll create a header row and insert the column names into the rows.  </p>
<pre class="highlight javascript"><code>  <span class="kd">var</span> <span class="nx">header_row</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">'tr'</span><span class="p">);</span>
   <span class="nx">table</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">header_row</span><span class="p">);</span>
   <span class="nx">response</span><span class="p">.</span><span class="nx">columns</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">colname</span><span class="p">){</span>
     <span class="kd">var</span> <span class="nx">header_col</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">'th'</span><span class="p">);</span>
     <span class="nx">header_row</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">header_col</span><span class="p">);</span>
     <span class="nx">header_col</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">colname</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre>

<p>Now, let&#39;s process the actual data from this report.  This time, however, we&#39;ll scan through each of the items, adding them one by one to the table we created before.</p>
<pre class="highlight javascript"><code>  <span class="nx">response</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">row</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">'tr'</span><span class="p">);</span>
    <span class="nx">table</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">row</span><span class="p">);</span>
    <span class="nx">response</span><span class="p">.</span><span class="nx">columns</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">colname</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">col</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Element</span><span class="p">(</span><span class="s1">'td'</span><span class="p">);</span>
      <span class="nx">row</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">col</span><span class="p">);</span>
      <span class="nx">col</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">item</span><span class="p">[</span><span class="nx">colname</span><span class="p">]);</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
<span class="p">}</span>
<span class="p">});</span>
</code></pre>

<p>And finally, we close up all the brackets and curly braces.</p>

<p>Reports are a very powerful way for plugin writers to get complex data out of Spiceworks and then process it in new and interesting ways.</p>

      </section>
    </main>
  </div>

    </div>

    <footer>
  <div class="sui-fluid-container">
    <a href="http://spiceworks.com" class="spiceworks-brand">
      <img alt="Spiceworks Logo" src="../../../images/spiceworks_reversed.png" />
    </a>
    <div class="mid-section">
      <div class="copy-wrapper">
        <p>An IT application, community, and marketplace all rolled into one. Spiceworks is the network more than 6 million IT professionals use to connect with one another and over 3,000 technology brands.</p>
        <p><a href="http://spiceworks.com">Learn More <span class="arrows">»</span></a></p>
      </div>
      <div class="button-wrapper">
        <a class="btn btn-orange is-outlined" href="../../../support/">Contact Us</a>
      </div>
    </div>
    <div class="bottom-section">
      <span class="copyright">© Copyright 2006-14 Spiceworks, Inc.</span>
      <ul class="footer-links">
        <li><a href="//www.spiceworks.com/about">About</a></li>
        <li><a href="//www.spiceworks.com/app">App</a></li>
        <li><a href="//www.spiceworks.com/downloads">Downloads</a></li>
        <li><a href="//community.spiceworks.com">Community</a></li>
        <li><a href="//www.spiceworks.com/marketing">Advertising</a></li>
      </ul>
    </div>
  </div>
</footer>


    
    <script src="../../../javascripts/application.js" type="text/javascript"></script>
  </body>
</html>
